%body

  %header.header
    .user-field
      .user-field__name 
        = current_user.name
      .user-field__box
        .user-field__box__icon
          = link_to edit_user_path(current_user) do
            = fa_icon 'cog'
        .user-field__box__icon
          = link_to new_group_path do
            = fa_icon 'edit'
    .group-field
      .group-field__name
        = @group.name
      %ul.group-field__member-list__group
      %li.group-field__member-list__text Memberï¼š
      - @group.users.each do |user|
        %li.group-field__member-list__member
          = user.name
      = link_to "Edit", edit_group_path(@group), class: "group-field__edit"
  .contents
    .group-list
      - current_user.groups.each do |group|
        .group-list__group
          = link_to group_messages_path(group) do
            %p.group-list__group__name 
              = group.name
            %p.group-list__group__message
              = group.show_last_message
    .right-contents
      %ul.message-list
        - @group.messages.each do |message|
          %li.message-list__message
            %p.message-list__message__user
              = message.user.name
            %p.message-list__message__date
              = message.created_at.strftime("%Y/%m/%d %H:%M")
            %p.message-list__message__text
              = message.body
            = image_tag(message.image) if message.image.present?
      
      = form_for [@group, @message] do |f|
        .send-box
          .send-box__form
            = f.text_field :body, class: 'send-box__form__input-form', placeholder: 'type a message'
            = f.label :image, class: 'send-box__form__upload-label' do
              = fa_icon 'picture-o'
            = f.file_field :image, class: 'hidden send-box__form__file-select'
            = f.submit 'Send', class: 'send-box__form__submit-btn'
